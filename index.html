<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Call progress animation test</title>
	<link rel="stylesheet" href="style.css" />
	<link rel="stylesheet" href="animation.css" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="icon" href="//duplii.com/images/favicon-32.png">
	<link rel="apple-touch-icon" href="//duplii.com/images/favicon-152.png">
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
</head>
<body>
	<header>
		<a href="http://duplii.com" title="Duplii | We Make Duplication Happen"><img src="//duplii.com/images/duplii-logo.svg" alt="Duplii | We Make Duplication Happen" class="logo" /></a>
	</header>
	
	<div class="progress-indicator-wrapper">
	    <img src="caller-pictures.jpg" class="avatar mod-130 mod-call-progress" alt="" />
        <div class="dial-container container1">
            <div class="wedge"></div>
        </div>
        <div class="dial-container container2">
            <div class="wedge"></div>
        </div>
	</div>
	
	<small onclick="toggleCallProgress()">Click here to toggle the animation</small>
	
	<script>
	    var progressElement = document.querySelector('.progress-indicator-wrapper');
	    
		function toggleCallProgress() {
			progressElement.classList.toggle('mod-running');
			pulse();
		}
		
		function pulse() {
		    progressElement.addEventListener('webkitAnimationEnd', function () {
		        progressElement.classList.add('is-pulsing');
		    }, {once: true});
		}
	</script>
</body>
</html>